

{% extends 'dashboard/base-login.html' %}
{% block title %}Dashboard | EngiHub{% endblock %}
{% load static staticfiles %}

    {% block stylesheets %}

    <link rel="stylesheet" href={% static "dashboard/dash.css" %}>

    <!-- toast style -->
    <style>
#snackbar {
    visibility: hidden;
    min-width: 250px;
    margin-left: -125px;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: 2px;
    padding: 16px;
    position: fixed;
    z-index: 1;
    left: 50%;
    bottom: 30px;
    font-size: 17px;
}

#snackbar.show {
    visibility: visible;
    -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
    animation: fadein 0.5s, fadeout 0.5s 2.5s;
}

@-webkit-keyframes fadein {
    from {bottom: 0; opacity: 0;}
    to {bottom: 30px; opacity: 1;}
}

@keyframes fadein {
    from {bottom: 0; opacity: 0;}
    to {bottom: 30px; opacity: 1;}
}

@-webkit-keyframes fadeout {
    from {bottom: 30px; opacity: 1;}
    to {bottom: 0; opacity: 0;}
}

@keyframes fadeout {
    from {bottom: 30px; opacity: 1;}
    to {bottom: 0; opacity: 0;}
}
</style>

    {% endblock %}

{% block content %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

    <script>
        new Clipboard('.share_button');
    </script>

    <!-- Toast function -->
    <script>
        function showToast() {
        var x = document.getElementById("snackbar")
        x.className = "show";
        setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);}
    </script>

    {% for afile in files %}

        <div class="mdl-card mdl-shadow--2dp mdl-card--horizontal">
  <div class="mdl-card__media">
    <img src="http://placehold.it/150x200/46B6AC/FFFFFF" alt="img">
  </div>
    <div class="mdl-card__title">
      <h2 class="mdl-card__title-text">{{ afile.name }}</h2>
    </div>

    <div class="mdl-card__supporting-text">
    Uploaded On: {{ afile.upload_time }}<br>
    File Size: {{ afile.size }} {{ afile.size_postfix }} <br><br>
    {{ afile.desc }}
    </div>
    <div class="mdl-card__actions mdl-card--border">
      <a id="download{{ afile.pk }}" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{% url 'main:file_download' path=afile.file %}">Download</a>
      <div class="mdl-tooltip" for="download{{ afile.pk }}">
            Download file {{ afile.file | cut:"uploaded_files/" }}
      </div>

      <a id="report{{ afile.pk }}" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" >Report</a>
      <div class="mdl-tooltip" for="report{{ afile.pk }}">
            Report this file
      </div>
      {% ifequal afile.uploader_id request.user.id %}
        <a id="delete{{ afile.pk }}" href="{% url 'main:file_delete' id=afile.id %}" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">Delete</a>
      <div class="mdl-tooltip" for="delete{{ afile.pk }}">
            Delete file {{ afile.file | cut:"uploaded_files/" }}
      </div>
      {% endifequal %}
    </div>

    <div class="mdl-card__menu">
        <button onclick="showToast()" id="share{{ afile.pk }}" class="share_button mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-clipboard-text="https://engihub.herokuapp.com/detail/{{ afile.id }}">
        <i class="material-icons">share</i>
        </button>
    </div>
        <div class="mdl-tooltip mdl-tooltip--large" for="share{{ afile.pk }}">
            Share this file
        </div>

</div>
        <br><br>
    {% endfor %}
    <!-- Toast Text -->
    <div id="snackbar">Copied to clipboard!</div>
{% endblock %}


